# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

tasks:
  - name: install
    init: |
      sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
      wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
      sudo apt-get update && sudo apt-get -y install postgresql-client-15
      npm install pm2 -g
      pnpm i --shamefully-hoist
      make start
  - name: main-terminal
    init: |
      gp ports await 8055
      make stop
    command: make start

ports:
  - name: nuxt-example
    port: 3000
    onOpen: ignore
    visibility: public
  - name: directus
    port: 8055
    onOpen: ignore
    visibility: public
  - name: docs
    port: 5173
    onOpen: ignore
    visibility: public
  - name: postgres
    description: SQL Database
    port: 54322
    onOpen: ignore
    visibility: private
